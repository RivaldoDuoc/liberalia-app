{% extends "base.html" %}
{% block title %}Nueva contraseña - Liberalia{% endblock %}
{% block content %}
<div class="card shadow-sm auth-card p-3 p-md-4">
  {% if validlink %}
    <h5 class="text-center mb-3">Define tu nueva contraseña</h5>
    <form method="post" class="needs-validation" novalidate>
      {% csrf_token %}
      <div class="mb-3">
        <input type="password" name="new_password1" class="form-control" placeholder="Nueva contraseña" aria-label="Nueva contraseña" required autocomplete="new-password" minlength="6">
        <div class="invalid-feedback">Ingresa una contraseña válida (mínimo 6 caracteres).</div>
      </div>
      <div class="mb-3">
        <input type="password" name="new_password2" class="form-control" placeholder="Confirmar nueva contraseña" aria-label="Confirmar nueva contraseña" required autocomplete="new-password" minlength="6">
        <div class="invalid-feedback">Debes confirmar la contraseña.</div>
      </div>
      <div class="d-grid">
        <button type="submit" class="btn btn-dark rounded-4 py-2">Guardar</button>
      </div>
    </form>
  {% else %}
    <h5 class="text-center mb-2">Enlace no válido o expirado</h5>
    <p class="text-center text-muted">Solicita un nuevo enlace de recuperación.</p>
    <div class="d-grid">
      <a class="btn btn-dark rounded-4 py-2" href="{% url 'password_reset' %}">Solicitar nuevamente</a>
    </div>
  {% endif %}
</div>
{% endblock %}
